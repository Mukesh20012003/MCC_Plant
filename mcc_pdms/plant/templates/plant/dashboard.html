{% extends "plant/base.html" %}
{% load static %}

{% block title %}Dashboard - MCC PDMS{% endblock %}

{% block content %}
<div class="row mb-4">
  <div class="col-12">
    <h2 class="mb-1">Plant Overview</h2>
    <p class="text-muted">
      Welcome,
      <span class="badge badge-role">{{ request.user.username }}</span>
      &nbsp;Role: {{ request.user.profile.role }}
    </p>
  </div>
</div>

<div class="row g-3" id="summary-cards">
  <div class="col-md-4">
    <div class="card card-pdms shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Total Batches</h5>
        <p class="display-6" id="total-batches">-</p>
        <p class="text-muted small mb-0">All recorded MCC production batches.</p>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card card-pdms shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Predicted to Pass</h5>
        <p class="display-6" id="predicted-pass">-</p>
        <p class="text-muted small mb-0">Batches with ML prediction = pass.</p>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card card-pdms shadow-sm">
      <div class="card-body">
        <h5 class="card-title">QC Reports</h5>
        <p class="display-6" id="total-qc">-</p>
        <p class="text-muted small mb-0">Total QC records stored.</p>
      </div>
    </div>
  </div>
</div>

<div class="row g-3 mt-4">
  <div class="col-md-6">
    <div class="card card-pdms shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Quick Actions</h5>
        <p class="text-muted small">
          Create new records directly from the dashboard.
        </p>
        <a href="{% url 'create_raw_material' %}" class="btn btn-outline-light btn-sm me-2 mt-1">
          Add Raw Material
        </a>
        <a href="{% url 'create_production_batch' %}" class="btn btn-outline-light btn-sm me-2 mt-1">
          Add Batch
        </a>
        <a href="{% url 'create_qc_report' %}" class="btn btn-outline-light btn-sm mt-1">
          Add QC Report
        </a>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card card-pdms shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Recent Batches</h5>
        <ul class="list-group list-group-flush" id="recent-batches">
          <!-- Filled by JS -->
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'plant/js/mcc.js' %}"></script>
{% endblock %}
